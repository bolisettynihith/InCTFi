#!/usr/bin/python3

#### Log Splitter ####

import os

# load the log file locations from environment
env = list(map(lambda x: x.split("="), open(
    "/var/www/environment.env").readlines()))

for e in env:
    os.environ[e[0]] = e[1].strip()
    if(os.path.exists(e[1].strip())):  # check if the log file exists
        try:
            # split the log file into chunks
            os.system(
                f"zcat ${e[0].strip()} | split -l50 --filter='gzip' > $FILE.gz")
        except Exception as e:
            print(e)
    else:
        pass
